@using Signum.Utilities;
@using System.IO;
@using Newtonsoft.Json.Linq;
@inject Microsoft.AspNetCore.Hosting.IWebHostEnvironment hostingEnv

@{
    //FileNotFoundException??? You need to run 'yarn watch'. Requires:
    //- Node.js: https://nodejs.org/
    //- Yarn: https://yarnpkg.com/en/
    //- NPM Task Runner: https://marketplace.visualstudio.com/items?itemName=MadsKristensen.NPMTaskRunner)
    string json = File.ReadAllText(System.IO.Path.Combine(hostingEnv.WebRootPath, "dist/webpack-assets.json"));
    var main = (string)JObject.Parse(json).Property("main")!.Value["js"]!;

    string jsonDll = File.ReadAllText(System.IO.Path.Combine(hostingEnv.WebRootPath, "dist/webpack-assets.dll.json"));
    var vendor = (string)JObject.Parse(jsonDll).Property("vendor")!.Value["js"]!;
}
<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>@ViewBag.Title</title>
    <link rel="icon" type="image/x-icon" href="@Url.Content("~/favicon.ico")" />
    <style>
        :root {
            --loader-width: 70px;
            --loader-height: 70px;
            --loader-color-primary: #27ae60;
            --loader-color-secondary: #eee;
            --line-width: 3px;
            --animation-duration: 2s;
            --loader-initial-scale: 0.1;
        }

        .center-container {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100%
        }

        
        @@keyframes momentum {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(-360deg);
            }
        }

        .loading-spinner,
        .loading-spinner:before,
        .loading-spinner:after {
            box-sizing: border-box;
            flex-grow: 0;
            flex-shrink: 0;
        }

        .loading-spinner {
            --primary-circle-offset: calc(((var(--loader-width,100px) * 0.2) / 2) - var(--line-width,4px));
            --secondary-circle-offset: calc(((var(--loader-width,100px) * 0.4) / 2) - var(--line-width,4px)); /*- (var(--line-width,4px) * 2)*/
            position: relative;
            width: var(--loader-width, 100px);
            height: var(--loader-height, 100px);
            transform-origin: center center;
            border-radius: 50%;
            border: var(--line-width, 4px) solid rgba(0,0,0,0);
            border-top-color: rgb(79,120,166);
            animation: momentum var(--animation-duration, 1s) linear infinite;
        }

            .loading-spinner:before {
                content: "";
                position: absolute;
                transform-origin: center center;
                top: var(--primary-circle-offset,10px);
                left: var(--primary-circle-offset,10px);
                width: calc(var(--loader-width,100px) * 0.8);
                height: calc(var(--loader-height,100px) * 0.8);
                border-radius: 50%;
                border: var(--line-width,4px) solid rgba(0,0,0,0);
                border-top-color: rgb(234,162,37);
                opacity: 0.7;
                filter: hue-rotate(3eg);
                animation: momentum calc(var(--animation-duration, 1s) * 2) linear infinite;
            }

            .loading-spinner:after {
                content: "";
                position: absolute;
                top: var(--secondary-circle-offset,20px);
                left: var(--secondary-circle-offset,20px);
                width: calc(var(--loader-width,100px) * 0.6);
                height: calc(var(--loader-height,100px) * 0.6);
                border-radius: 50%;
                transform-origin: center center;
                border: var(--line-width,4px) solid rgba(0,0,0,0);
                border-top-color: rgb(156,159,164);
                opacity: 0.3;
                filter: hue-rotate(6eg);
                animation: momentum var(--animation-duration, 1s) linear infinite;
            }
    </style>
</head>
<body>
    <div id="reactDiv">
        <div class="center-container">
            <div class="loading-spinner"></div>
            <h3 style="margin-left: 20px;color:rgb(156,159,164)">Loading Southwind...</h3>
        </div>
    </div>
    <script>
        var __baseUrl = "@Url.Content("~/")";
    </script>
    <script language="javascript" src="@Url.Content("~/dist/" + vendor)"></script>
    <script language="javascript" src="@Url.Content("~/dist/" + main)"></script>
</body>
</html>
