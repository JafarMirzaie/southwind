<?xml version="1.0" encoding="utf-8"?>
<File>
  <Modules>
    <Module Name="ExampleEntities">
      <RemoveFiles Path="Southwind.Entities\Address.cs"/>
      <RemoveFiles Path="Southwind.Entities\Customer.cs"/>
      <RemoveFiles Path="Southwind.Entities\Employee.cs"/>
      <RemoveFiles Path="Southwind.Entities\Order.cs"/>
      <RemoveFiles Path="Southwind.Entities\Product.cs"/>
      
      <RemoveLine Path="Southwind.Load\Program.cs" Line="{100, ShowOrder},"/>
      <RemoveLine Path="Southwind.Load\Program.cs" From="static void ShowOrder()" To="}//ShowOrder"/>
      
      <RemoveFiles Path="Southwind.Logic\CustomerLogic.cs"/>
      <RemoveFiles Path="Southwind.Logic\EmployeeLogic.cs"/>
      <RemoveFiles Path="Southwind.Logic\OrderLogic.cs"/>
      <RemoveFiles Path="Southwind.Logic\ProductLogic.cs"/>
      <RemoveFiles Path="Southwind.Logic\ShipperLogic.cs"/>
      <RemoveLine Path="Southwind.Logic\Starter.cs" From="EmployeeLogic.Start(sb, dqm);" To="ShipperLogic.Start(sb, dqm);"/>
      <RemoveLine Path="Southwind.Logic\Starter.cs" 
                  From="TypeConditionLogic.Register&lt;OrderDN>(SouthwindGroup.UserEntities, o => o.Employee.RefersTo(EmployeeDN.Current));" 
                  To="TypeConditionLogic.Register&lt;CompanyDN>(SouthwindGroup.CurrentCustomer, o => o == CustomerDN.Current);"/>
      <RemoveLine Path="Southwind.Logic\Starter.cs" Line="CacheLogic.CacheTable&lt;ShipperDN>(sb);"/>

     
    </Module>
    
    <Module Name="Windows">
      <RemoveFiles Path="Southwind.Windows"/>
      <RemoveFiles Path="Southwind.Entities\IServerSouthwind.cs"/>
      <RemoveFiles Path="Southwind.Web\ServerSouthwind.svc"/>
      <RemoveFiles Path="Southwind.Web\ServerSouthwind.svc.cs"/>
      <RemoveLine Path="Southwind.Web\Web.config" From="&lt;system.serviceModel&gt;" To="&lt;/system.diagnostics&gt;--&gt;"/>

      <RemoveLine DependsOn="ExampleEntities" Path="Southwind.Windows\App.xaml.cs" Line="using Southwind.Windows.Controls;"/>
      <RemoveLine DependsOn="ExampleEntities" Path="Southwind.Windows\Code\SouthwindClient.cs" Line="using Southwind.Windows.Controls;"/>
      <RemoveLine DependsOn="ExampleEntities" Path="Southwind.Windows\Code\SouthwindClient.cs"
                  From="new EntitySettings&lt;EmployeeDN>() { View = e => new Employee()},"
                  To="new EntitySettings&lt;OrderDN>() { View = e => new Order()},"/>
      <RemoveLine DependsOn="ExampleEntities"
                  Path="Southwind.Windows\Code\SouthwindClient.cs"
                  From="Constructor.Register(ctx => new EmployeeDN { Address = new AddressDN() });"
                  To="//NotDefined"/>
      <RemoveFiles DependsOn="ExampleEntities"
                   Path="Southwind.Windows\Controls"/>
      <RemoveLine DependsOn="ExampleEntities"
                  Path="Southwind.Windows\Main.xaml"
                  From="&lt;MenuItem Header=&quot;{m:LocTypePlural {x:Type d:OrderDN}}&quot;>"
                  To="&lt;!--Admin-->"/>
    </Module>

    <Module Name="ExampleWeb" DependsOn="ExampleEntities" >
      <RemoveLine Path="Southwind.Web\Code\SouthwindClient.cs" Line="public static JsModule OrderModule = new JsModule(&quot;Order&quot;);"/>
      <RemoveLine Path="Southwind.Web\Code\SouthwindClient.cs" 
                  From="new EmbeddedEntitySettings&lt;AddressDN>() { PartialViewName = e => ViewPrefix.Formato(&quot;Address&quot;) },"
                  To="new EntitySettings&lt;ShipperDN>() { PartialViewName = e => ViewPrefix.Formato(&quot;Shipper&quot;) },"/>
      <RemoveLine Path="Southwind.Web\Code\SouthwindClient.cs"
            From="Constructor.Register(ctx => new EmployeeDN { Address = new AddressDN() });"
            To="RegisterQuickLinks();"/>
      <RemoveLine Path="Southwind.Web\Code\SouthwindClient.cs"
      From="private static ValueLineBoxOptions GetValueLineOptions(string prefix)"
      To="} //RegisterQuickLinks"/>
      <RemoveFiles Path="Southwind.Web\Scripts\Order.ts"/>
      <RemoveFiles Path="Southwind.Web\Scripts\Order.js"/>
      <RemoveFiles Path="Southwind.Web\Scripts\Product.ts"/>
      <RemoveFiles Path="Southwind.Web\Scripts\Product.js"/>
      <RemoveFiles Path="Southwind.Web\Views\Southwind\Address.cshtml"/>
      <RemoveFiles Path="Southwind.Web\Views\Southwind\Category.cshtml"/>
      <RemoveFiles Path="Southwind.Web\Views\Southwind\Company.cshtml"/>
      <RemoveFiles Path="Southwind.Web\Views\Southwind\Employee.cshtml"/>
      <RemoveFiles Path="Southwind.Web\Views\Southwind\Order.cshtml"/>
      <RemoveFiles Path="Southwind.Web\Views\Southwind\OrderDetails.cshtml"/>
      <RemoveFiles Path="Southwind.Web\Views\Southwind\Person.cshtml"/>
      <RemoveFiles Path="Southwind.Web\Views\Southwind\Product.cshtml"/>
      <RemoveFiles Path="Southwind.Web\Views\Southwind\Region.cshtml"/>
      <RemoveFiles Path="Southwind.Web\Views\Southwind\Shipper.cshtml"/>
      <RemoveFiles Path="Southwind.Web\Views\Southwind\Supplier.cshtml"/>
      <RemoveFiles Path="Southwind.Web\Views\Southwind\Territory.cshtml"/>
      <RemoveLine Path="Southwind.Web\Views\Shared\Menu.cshtml" From="new WebMenuItem //Southwind" To="}, //Southwind"/>
      <RemoveLine Path="Southwind.Web\Global.asax.cs" Line="SouthwindClient.Start();"/>
      <RemoveLine Path="Southwind.Web\Controllers\HomeController.cs" 
                  From="public ContentResult UpdateOrders() //To move orders to the present" 
                  To="}//ShipOrder"/>
    </Module>

    <Module Name="Disconnected" DependsOn="Windows">
      <RemoveFiles Path="Southwind.Local"/>
      <RemoveLine Path="Southwind.Logic\Starter.cs" From="DisconnectedLogic.Start(sb, dqm);" To="DisconnectedLogic.DatabaseFolder = @&quot;D:\SouthwindTemp\Database&quot;;"/>
      <RemoveLine Path="Southwind.Logic\Starter.cs" Line="SetupDisconnectedStrategies(sb);"/>
      <RemoveFiles Path="Southwind.Logic\Starter.Disconnected.cs"/>
      <RemoveLine Path="Southwind.Logic\Starter.Disconnected.cs" DependsOn="ExampleEntities"
                  From="Expression&lt;Func&lt;OperationLogDN, bool>> operationLogCondition = ol =>"
                  To="DisconnectedLogic.Register&lt;OperationLogDN>(operationLogCondition, Upload.New);"/>
      <RemoveLine Path="Southwind.Logic\Starter.Disconnected.cs" DependsOn="ExampleEntities"
                  From="DisconnectedLogic.Register&lt;ExceptionDN>(e => Database.Query&lt;OperationLogDN>()"
                  To=".Any(ol => operationLogCondition.Evaluate(ol) &amp;&amp; ol.Exception.RefersTo(e)), Upload.New);"/>
      <RemoveLine Path="Southwind.Logic\Starter.Disconnected.cs" DependsOn="ExampleEntities"
            From="DisconnectedLogic.Register&lt;EmployeeDN>(Download.All, Upload.None);"
            To="DisconnectedLogic.Register&lt;ShipperDN>(Download.All, Upload.None);" />
      <RemoveLine Path="Southwind.Web\Global.asax.cs" Line="DisconnectedClient.Start();"/>
      <RemoveLine Path="Southwind.Windows\Program.cs" Line="using Southwind.Local;"/>
      <RemoveLine Path="Southwind.Windows\Program.cs" From="public enum StartOption" To="}"/>
      <RemoveLine Path="Southwind.Windows\Program.cs" From="if (RunLocally())" To="else //Run remotely"/>
      <RemoveLine Path="Southwind.Windows\Program.cs" From="if (!Server.OfflineMode)" To="}"/>
      <RemoveLine Path="Southwind.Windows\Program.cs" From="if (Server.OfflineMode)" To="LocalServer.Stop();"/>
      <RemoveLine Path="Southwind.Windows\Program.cs" From="private static bool RunLocally()" To="}//RunLocally"/>
      <RemoveLine Path="Southwind.Windows\Program.cs" From="private static void UploadIfNecessary()" To="}//UploadIfNecessary"/>
      <RemoveLine Path="Southwind.Windows\App.xaml.cs" Line="using Southwind.Local;"/>
      <RemoveLine Path="Southwind.Windows\App.xaml.cs" Line="DisconnectedClient.Start();"/>
      <RemoveFiles Path="Southwind.Web\ServerSouthwindTransfer.svc"/>
      <RemoveFiles Path="Southwind.Web\ServerSouthwindTransfer.svc.cs"/>
      <RemoveLine Path="Southwind.Web\Web.config" Line="&lt;binding name=&quot;TransferBinding&quot; maxReceivedMessageSize=&quot;10067108864&quot; transferMode=&quot;Streamed&quot; messageEncoding=&quot;Mtom&quot; />"/>
      <RemoveLine Path="Southwind.Web\Web.config" From="&lt;service name=&quot;Southwind.Web.ServerSouthwindTransfer&quot; behaviorConfiguration=&quot;TransferBehavior&quot;&gt;" To="&lt;/service&gt;"/>
      <RemoveLine Path="Southwind.Web\Web.config" From="&lt;behavior name=&quot;TransferBehavior&quot;&gt;" To="&lt;/behavior&gt;"/>
      <RemoveLine Path="Southwind.Windows\Main.xaml" From="&lt;MenuItem Header=&quot;Disconnected&quot; x:Name=&quot;miDisconnected&quot;>" To="&lt;/MenuItem>"/>
      <RemoveLine Path="Southwind.Windows\Main.xaml.cs" From="if (Server.OfflineMode)" To="} //OfflineMode"/>
      <RemoveLine Path="Southwind.Windows\Main.xaml.cs" From="private void miDownload_Click(object sender, RoutedEventArgs e)" To="} //Disconnected"/>
    </Module>

    <Module Name="LoadNorthwind" DependsOn="ExampleEntities">	  
	  <RemoveLine Path="Southwind.Load\Program.cs" From="{0, EmployeeLoader.LoadRegions}," To="{30, OrderLoader.UpdateOrdersDate },"/>
      <RemoveFiles Path="Southwind.Load\CustomerLoader.cs"/>
      <RemoveFiles Path="Southwind.Load\EmployeeLoader.cs"/>
      <RemoveFiles Path="Southwind.Load\Northwind.dbml"/>
      <RemoveFiles Path="Southwind.Load\Northwind.dbml.layout"/>
      <RemoveFiles Path="Southwind.Load\Northwind.designer.cs"/>
      <RemoveFiles Path="Southwind.Load\NorthwindPartials.cs"/>
      <RemoveFiles Path="Southwind.Load\OrderLoader.cs"/>
      <RemoveFiles Path="Southwind.Load\ProductLoader.cs"/>
      <RemoveFiles Path="Southwind.Load\SupplierFaxes.csv"/>
    </Module>

    <Module Name="UserQuery">
      <RemoveLine Path="Southwind.Logic\Starter.cs" Line="sb.Schema.Settings.FieldAttributes((UserQueryDN uq) => uq.Owner).Replace(new ImplementedByAttribute(typeof(UserDN), typeof(RoleDN)));"/>
      <RemoveLine Path="Southwind.Logic\Starter.cs" Line="UserQueryLogic.Start(sb, dqm);"/>
      <RemoveLine Path="Southwind.Logic\Starter.cs" Line="UserQueryLogic.RegisterUserTypeCondition(sb, SouthwindGroup.UserEntities);"/>
      <RemoveLine Path="Southwind.Logic\Starter.cs" Line="UserQueryLogic.RegisterRoleTypeCondition(sb, SouthwindGroup.RoleEntities);"/>
      <RemoveLine Path="Southwind.Web\Global.asax.cs" Line="UserQueriesClient.Start();"/>
      <RemoveLine Path="Southwind.Windows\App.xaml.cs" Line="UserQueryClient.Start();"/>
      <RemoveLine Path="Southwind.Web\Views\Shared\Menu.cshtml" Line="new WebMenuItem { Link = new FindOptions(typeof(UserQueryDN)) },"/>
      <RemoveLine Path="Southwind.Windows\Main.xaml" Line="&lt;MenuItem Tag=&quot;{m:Explore QueryName={x:Type seu:UserQueryDN}}&quot;/>"/>

    </Module>

    <Module Name="Chart" DependsOn="Files">
      <RemoveLine Path="Southwind.Logic\Starter.cs" Line="sb.Schema.Settings.FieldAttributes((UserChartDN uc) => uc.Owner).Replace(new ImplementedByAttribute(typeof(UserDN), typeof(RoleDN)));"/>
      <RemoveLine Path="Southwind.Logic\Starter.cs" Line="ChartLogic.Start(sb, dqm);"/>
      <RemoveLine Path="Southwind.Logic\Starter.cs" Line="UserChartLogic.RegisterUserTypeCondition(sb, SouthwindGroup.UserEntities);"/>
      <RemoveLine Path="Southwind.Logic\Starter.cs" Line="UserChartLogic.RegisterRoleTypeCondition(sb, SouthwindGroup.RoleEntities);"/>
      <RemoveFiles Path="Southwind.Web\Libs\CodeMirror\"/>
      <RemoveFiles Path="Southwind.Web\Libs\d3.v3.min.js"/>
      <RemoveFiles Path="Southwind.Web\Libs\colorbrewer.js"/>
      <RemoveLine Path="Southwind.Web\Global.asax.cs" Line="ChartClient.Start();"/>
      <RemoveLine Path="Southwind.Windows\App.xaml.cs" Line="ChartClient.Start();"/>
      <RemoveLine Path="Southwind.Load\Program.cs" Line="{42, ChartScriptLogic.ImportExportChartScripts},"/>
      <RemoveLine Path="Southwind.Web\Views\Shared\Menu.cshtml" Line="new WebMenuItem { Link = new FindOptions(typeof(UserChartDN)) },"/>
      <RemoveLine Path="Southwind.Web\Views\Shared\Menu.cshtml" Line="new WebMenuItem { Link = new FindOptions(typeof(ChartScriptDN)) },"/>
      <RemoveLine Path="Southwind.Windows\Main.xaml" Line="&lt;MenuItem Tag=&quot;{m:Explore QueryName={x:Type sec:UserChartDN}}&quot;/>"/>
    </Module>

    <Module Name="Files">
      <RemoveLine Path="Southwind.Logic\Starter.cs" Line="FilePathLogic.Start(sb, dqm);"/>
      <RemoveLine Path="Southwind.Logic\Starter.cs" Line="FileLogic.Start(sb, dqm);"/>
      <RemoveLine Path="Southwind.Web\Global.asax.cs" From="FilesClient.Start(" To="embeddedFile: true);"/>
      <RemoveLine Path="Southwind.Windows\App.xaml.cs" Line="FilePathClient.Start();"/>
      <RemoveLine DependsOn="ExampleEntities" Path="Southwind.Entities\Employee.cs" From="Lite&lt;FileDN&gt; photo;" To="}"/>
      <RemoveLine DependsOn="ExampleEntities" Path="Southwind.Entities\Product.cs" From="EmbeddedFileDN picture;" To="}"/>
      <RemoveLine DependsOn="ExampleEntities" Path="Southwind.Load\EmployeeLoader.cs" Line="Photo = new FileDN { FileName = e.PhotoPath.AfterLast('/'), BinaryFile = RemoveOlePrefix(e.Photo.ToArray()) }.ToLiteFat(),"/>
      <RemoveLine DependsOn="ExampleEntities" Path="Southwind.Load\EmployeeLoader.cs" From="public static byte[] RemoveOlePrefix(byte[] bytes)" To="} //RemoveOlePrefix"/>
      <RemoveLine DependsOn="ExampleEntities" Path="Southwind.Load\ProductLoader.cs" Line="Picture = new EmbeddedFileDN { FileName = s.CategoryName + &quot;.jpg&quot;, BinaryFile = EmployeeLoader.RemoveOlePrefix(s.Picture.ToArray()) },"/>
      <RemoveLine DependsOn="ExampleEntities" Path="Southwind.Logic\ProductLogic.cs" Line="s.Picture"/>
      <RemoveLine DependsOn="ExampleEntities" Path="Southwind.Logic\EmployeeLogic.cs" Line="e.Photo, //1"/>
      <RemoveLine DependsOn="ExampleEntities" Path="Southwind.Logic\EmployeeLogic.cs" Line="e.Photo, //2"/>
      <RemoveLine DependsOn="ExampleEntities" Path="Southwind.Web\Code\SouthwindClient.cs" From="QuerySettings.RegisterPropertyFormat((CategoryDN e) => e.Picture," To=".Attr(&quot;style&quot;, &quot;width:48px&quot;).ToHtmlSelf()) { TextAlign = &quot;center&quot; }); //Emmployee"/>
      <RemoveLine DependsOn="ExampleEntities" Path="Southwind.Web\Code\SouthwindClient.cs" From="public static string Base64Data(EmbeddedFileDN file)" To="} //Base64Data"/>
      <RemoveLine DependsOn="ExampleEntities" Path="Southwind.Web\Views\Southwind\Category.cshtml" From="@Html.FileLine(cc, a => a.Picture)" To="} //Picture"/>
      <RemoveLine DependsOn="ExampleEntities" Path="Southwind.Web\Views\Southwind\Employee.cshtml" From="@Html.FileLine(ec, a => a.Photo.Try(p => p.Retrieve()))" To="} //Photo"/>
      <RemoveLine DependsOn="ExampleEntities" Path="Southwind.Windows\Code\SouthwindClient.cs" From="QuerySettings.RegisterPropertyFormat((EmployeeDN e) => e.Photo, b =>" To="}); //Picture"/>
      <RemoveLine DependsOn="ExampleEntities" Path="Southwind.Windows\Controls\Category.xaml" From="&lt;f:FileLine m:Common.Route=&quot;Picture&quot; />" To="&lt;/Border>"/>
      <RemoveLine DependsOn="ExampleEntities" Path="Southwind.Windows\Controls\Employee.xaml" From="&lt;StackPanel  Grid.Column=&quot;1&quot; Grid.Row=&quot;0&quot;>" To="&lt;/StackPanel>"/>
      <RemoveFiles DependsOn="ExampleEntities" Path="Southwind.Windows\SouthwindConverters.cs"/>
    </Module>

    <Module Name="Excel">
      <RemoveLine Path="Southwind.Web\Global.asax.cs" From="ExcelClient.Start(" To="excelReport: false);"/>
      <RemoveLine Path="Southwind.Windows\App.xaml.cs" Line="ExcelClient.Start(toExcel: true, excelReport: false);"/>
    </Module>

    <Module Name="Dashboard" DependsOn="Chart,UserQuery">
      <RemoveLine Path="Southwind.Logic\Starter.cs" Line="sb.Schema.Settings.FieldAttributes((DashboardDN cp) => cp.Owner).Replace(new ImplementedByAttribute(typeof(UserDN), typeof(RoleDN)));"/>
      <RemoveLine Path="Southwind.Logic\Starter.cs" Line="DashboardLogic.Start(sb, dqm);"/>
      <RemoveLine Path="Southwind.Logic\Starter.cs" Line="ViewLogLogic.Start(sb, dqm, new HashSet&lt;Type> { typeof(UserQueryDN), typeof(UserChartDN), typeof(DashboardDN) }); "/>
      <RemoveLine Path="Southwind.Logic\Starter.cs" Line="DashboardLogic.RegisterUserTypeCondition(sb, SouthwindGroup.UserEntities);"/>
      <RemoveLine Path="Southwind.Logic\Starter.cs" Line="DashboardLogic.RegisterRoleTypeCondition(sb, SouthwindGroup.RoleEntities);"/>
      <RemoveLine Path="Southwind.Web\Controllers\HomeController.cs" From="var panel = DashboardLogic.GetHomePageDashboard();" To="return View(DashboardClient.ViewPrefix.Formato(&quot;Dashboard&quot;), panel);"/>
      <RemoveLine Path="Southwind.Web\Global.asax.cs" Line="DashboardClient.Start();"/>
      <RemoveLine Path="Southwind.Windows\App.xaml.cs" Line="DashboardClient.Start();"/>
      <RemoveLine Path="Southwind.Web\Views\Shared\Menu.cshtml" Line="new WebMenuItem { Link = new FindOptions(typeof(DashboardDN)) },"/>
      <RemoveLine Path="Southwind.Windows\Main.xaml" Line="&lt;swdb:DashboardView />"/>
    </Module>

    <Module Name="Process">
      <RemoveLine Path="Southwind.Entities\Order.cs" Line="public static readonly ConstructSymbol&lt;ProcessDN&gt;.FromMany&lt;OrderDN&gt; CancelWithProcess = OperationSymbol.Construct&lt;ProcessDN&gt;.FromMany&lt;OrderDN&gt;();"/>
      <RemoveLine Path="Southwind.Entities\Order.cs" From="public static class OrderProcess" To="}"/>
      <RemoveLine Path="Southwind.Logic\OrderLogic.cs" Line="ProcessLogic.Register(OrderProcess.CancelOrders, new CancelOrderAlgorithm());"/>
      <RemoveLine Path="Southwind.Logic\OrderLogic.cs" From="public class CancelOrderAlgorithm : PackageExecuteAlgorithm&lt;OrderDN&gt;" To="} //CancelOrderAlgorithm"/>
      <RemoveLine Path="Southwind.Logic\OrderLogic.cs" From="new Graph&lt;ProcessDN&gt;.ConstructFromMany&lt;OrderDN&gt;(OrderOperation.CancelWithProcess)" To="}.Register();"/>
      <RemoveLine Path="Southwind.Logic\Starter.cs" Line="MixinDeclarations.Register&lt;ProcessDN, UserProcessSessionMixin&gt;();"/>
      <RemoveLine Path="Southwind.Logic\Starter.cs" From="sb.Schema.Settings.FieldAttributes((ProcessDN cp) => cp.Data).Replace(new ImplementedByAttribute(typeof(PackageDN), typeof(PackageOperationDN)));"
                  To="sb.Schema.Settings.FieldAttributes((ProcessDN s) => s.Mixin&lt;UserProcessSessionMixin&gt;().User).Replace(new ImplementedByAttribute(typeof(UserDN)));"/>
      <RemoveLine Path="Southwind.Logic\Starter.cs" From="ProcessLogic.Start(sb, dqm, userProcessSession: true);"
                  To="PackageLogic.Start(sb, dqm, packages: true, packageOperations: true);"/>
      <RemoveLine Path="Southwind.Web\Global.asax.cs" Line="ProcessRunnerLogic.StartRunningProcesses(5 * 1000);"/>
      <RemoveLine Path="Southwind.Web\Global.asax.cs" From="ProcessClient.Start(" To="packageOperations: true);"/>
      <RemoveLine Path="Southwind.Windows\App.xaml.cs" Line="ProcessClient.Start(package: true, packageOperation: true);"/>
    </Module>

    <Module Name="Scheduler" DependsOn="Process">
      <RemoveLine Path="Southwind.Entities\Order.cs" From="public static class OrderTasks" To="}"/>
      <RemoveLine Path="Southwind.Logic\OrderLogic.cs" From="SimpleTaskLogic.Register(OrderTasks.CancelOldOrdersWithProcess, () =>" To="});//CancelOldOrdersProcess"/>
      <RemoveLine Path="Southwind.Logic\Starter.cs" Line="sb.Schema.Settings.FieldAttributes((ScheduledTaskLogDN a) => a.User).Replace(new ImplementedByAttribute(typeof(UserDN)));"/>
      <RemoveLine Path="Southwind.Logic\Starter.cs" Line="SchedulerLogic.Start(sb, dqm);"/>
      <RemoveLine Path="Southwind.Web\Global.asax.cs" Line="SchedulerClient.Start(simpleTask: true);"/>
      <RemoveLine Path="Southwind.Web\Global.asax.cs" Line="SchedulerLogic.StartScheduledTasks();"/>
      <RemoveLine Path="Southwind.Windows\App.xaml.cs" Line="SchedulerClient.Start();"/>

      
    </Module>

    <Module Name="Mailing">
      <RemoveLine Path="Southwind.Logic\Starter.cs" Line="sb.Schema.Settings.FieldAttributes((EmailMessageDN em) => em.From.EmailOwner).Replace(new ImplementedByAttribute(typeof(UserDN)));"/>
      <RemoveLine Path="Southwind.Logic\Starter.cs" Line="sb.Schema.Settings.FieldAttributes((EmailMessageDN em) => em.Recipients.First().EmailOwner).Replace(new ImplementedByAttribute(typeof(UserDN)));"/>
      <RemoveLine Path="Southwind.Logic\Starter.cs" Line="sb.Schema.Settings.FieldAttributes((SmtpConfigurationDN sc) => sc.DefaultFrom.EmailOwner).Replace(new ImplementedByAttribute(typeof(UserDN)));"/>
      <RemoveLine Path="Southwind.Logic\Starter.cs" Line="sb.Schema.Settings.FieldAttributes((SmtpConfigurationDN sc) => sc.AditionalRecipients.First().EmailOwner).Replace(new ImplementedByAttribute(typeof(UserDN)));"/>
      <RemoveLine Path="Southwind.Logic\Starter.cs" Line="EmailLogic.Start(sb, dqm, () => Configuration.Value.Email);"/>
      <RemoveFiles Path="Southwind.Web\Libs\ckeditor"/>
      <RemoveLine Path="Southwind.Web\Global.asax.cs" From="MailingClient.Start(" To="pop3Config: false);" />
    </Module>

    <Module Name="SMS">
      <RemoveLine Path="Southwind.Logic\Starter.cs" Line="SMSLogic.Start(sb, dqm, null, () => Configuration.Value.Sms);" />
      <RemoveLine Path="Southwind.Logic\Starter.cs" DependsOn="ExampleEntities"
                  From="SMSLogic.RegisterPhoneNumberProvider&lt;PersonDN>(p => p.Phone, p => null);"
                  To="SMSLogic.RegisterPhoneNumberProvider&lt;CompanyDN&gt;(p => p.Phone, p => null);"/>
      <RemoveLine Path="Southwind.Web\Global.asax.cs" Line="SMSClient.Start();" />
      <RemoveLine Path="Southwind.Windows\App.xaml.cs" Line="SMSClient.Start();" />
    </Module>

    <Module Name="Auth">
      <RemoveLine Path="Southwind.Logic\Starter.cs" Line="AuthLogic.Start(sb, dqm, &quot;System&quot;, null);"/>
      <RemoveLine Path="Southwind.Logic\Starter.cs" Line="AuthLogic.StartAllModules(sb, dqm);"/>
      <RemoveSpanInLines Path="Southwind.Logic\Starter.cs" Span="typeof(UserDN), typeof(RoleDN)"/>
      <RemoveSpanInLines Path="Southwind.Logic\Starter.cs" Span="typeof(UserDN)"/>
      <RemoveSpanInLines Path="Southwind.Logic\Starter.cs" Span="typeof(RoleDN)"/>
      <RemoveLine Path="Southwind.Web\Global.asax.cs" From="AuthClient.Start(" To="passwordExpiration: false);" />
      <RemoveLine Path="Southwind.Web\Global.asax.cs" From="AuthAdminClient.Start(" To="permissions: true);" />
      <RemoveLine Path="Southwind.Windows\App.xaml.cs" From="AuthClient.Start(" To="defaultPasswordExpiresLogic: false);" />
      <RemoveLine Path="Southwind.Load\Program.cs" Line="{43, AuthLogic.ImportExportAuthRules},"/>
      <RemoveLine Path="Southwind.Load\Program.cs" Line="{20, EmployeeLoader.CreateUsers },"/>
      <RemoveLine Path="Southwind.Load\Program.cs" Line="{21, EmployeeLoader.CreateSystemUser }, "/>
      <RemoveLine Path="Southwind.Load\EmployeeLoader.cs" From="internal static void CreateSystemUser()" To="} //CreateUsers"/>
      <RemoveFiles Path="Southwind.Load\AuthRules.xml" DependsOn="ExampleEntities"/>
      <RemoveFiles Path="Southwind.Entities\UserEmployeeMixin.cs" DependsOn="ExampleEntities"/>
      <RemoveLine Path="Southwind.Logic\Starter.cs" Line="MixinDeclarations.Register&lt;UserDN, UserEmployeeMixin&gt;();" DependsOn="ExampleEntities"/>
      <RemoveLine Path="Southwind.Web\ServerSouthwind.svc.cs" From="public override void Login(string username, string passwordHash)" To="} //Login" DependsOn="ExampleEntities"/>
      <RemoveLine Path="Southwind.Web\Global.asax.cs" From="AuthLogic.UserLogingIn += user =>" To="}; //UserLogingIn" DependsOn="ExampleEntities" />
      <RemoveLine Path="Southwind.Web\Global.asax.cs" 
                  From="Navigator.EntitySettings&lt;UserDN&gt;().CreateViewOverrides()"
                  To=".AfterLine((UserDN u) => u.Role, (html, tc) => html.EntityLine(tc, u => u.Mixin&lt;UserEmployeeMixin>().Employee));"
                  DependsOn="ExampleEntities"/>
      <RemoveLine Path="Southwind.Windows\App.xaml.cs" From="Navigator.EntitySettings&lt;UserDN&gt;().OverrideView += (usr, ctrl) =>" To="};" DependsOn="ExampleEntities"/>
      <RemoveSpanInLines Path="Southwind.Entities\Employee.cs" Span="get { return UserDN.Current.Mixin&lt;UserEmployeeMixin>().Employee; } //" DependsOn="ExampleEntities" />
      <RemoveLine Path="Southwind.Web\Views\Shared\_Layout.cshtml" Line="@{ Html.RenderPartial(AuthClient.LoginUserControlView);}" />
      <RemoveLine Path="Southwind.Web\Views\Shared\_Layout.cshtml" From="@if (UserDN.Current != null) //Omnibox" To="{" />
      <RemoveLine Path="Southwind.Web\Views\Shared\_Layout.cshtml" From="@if (UserDN.Current != null) //Menu" To="{" />
      <RemoveSpanInLines Path="Southwind.Web\Views\Shared\_Layout.cshtml" Span="} @*UserDN.Current*@" />
      <RemoveLine Path="Southwind.Web\Views\Shared\Menu.cshtml" Line="new WebMenuItem { Link = new FindOptions(typeof(UserDN)) },"/>
      <RemoveLine Path="Southwind.Web\Views\Shared\Menu.cshtml" Line="new WebMenuItem { Link = new FindOptions(typeof(RoleDN)) },"/>
      <RemoveLine Path="Southwind.Web\Code\SouthwindClient.cs" From="var user = Database.Query&lt;UserDN>()" To="links.Add(new QuickLinkView(user));"/>
      <RemoveLine Path="Southwind.Windows\Program.cs" From="static IServerSouthwind Login(IServerSouthwind result)" To="} //Login"/>
      <RemoveLine Path="Southwind.Windows\Program.cs" From="if (Application.Current == null || Application.Current.CheckAccess())" To="});"/>
      <RemoveLine Path="Southwind.Windows\Main.xaml" Line="&lt;MenuItem Tag=&quot;{m:Explore QueryName={x:Type sea:UserDN}}&quot;/>"/>
      <RemoveLine Path="Southwind.Windows\Main.xaml" Line="&lt;MenuItem Tag=&quot;{m:Explore QueryName={x:Type sea:RoleDN}}&quot;/>"/>
      <RemoveLine Path="Southwind.Test.Environment\SouthwindEnvironment.cs" From="internal static void LoadUsers()" To="}//LoadUsers"/>
      <RemoveLine Path="Southwind.Test.Environment\SouthwindEnvironment.cs" Line="user.SetMixin((UserEmployeeMixin e) => e.Employee, Database.Query&lt;EmployeeDN>().Single(e => e.FirstName == userName));" DependsOn="ExampleEntities"/>
      <RemoveLine Path="Southwind.Test.Environment\EnvironmentTest.cs" Line="SouthwindEnvironment.LoadUsers();"/>
      <RemoveLine Path="Southwind.Test.Environment\EnvironmentTest.cs" Line="var authRules = XDocument.Load(@&quot;D:\Signum\Southwind\Southwind.Load\AuthRules.xml&quot;); //Change this route if necessary. Only god knows where MSTest is running."/>
      <RemoveLine Path="Southwind.Test.Environment\EnvironmentTest.cs" Line="AuthLogic.LoadRoles(authRules);"/>
      <RemoveLine Path="Southwind.Test.Environment\EnvironmentTest.cs" Line="Executor.ExecuteNonQuery(AuthLogic.ImportRulesScript(authRules).PlainSql());"/>
    </Module>

    <Module Name="Translation">
      <RemoveLine Path="Southwind.Logic\Starter.cs" From="TranslationLogic.Start(sb, dqm);" To="TranslatedInstanceLogic.Start(sb, dqm, &quot;en&quot;);"/>
      <RemoveFiles Path="Southwind.Entities\Translations" DependsOn="ExampleEntities" />
      <RemoveFiles Path="Southwind.Web\Service References" />
      <RemoveFiles Path="Southwind.Web\Translations" />
      <RemoveLine Path="Southwind.Web\Global.asax.cs" From="TranslationClient.Start(new BingTranslator()," To="instanceTranslator: true);" />
      <RemoveLine Path="Southwind.Web\Global.asax.cs" From="Thread.CurrentThread.CurrentUICulture = Thread.CurrentThread.CurrentCulture = DefaultCulture;" To="return DefaultCulture; //Translation" />
      <RemoveLine Path="Southwind.Web\Global.asax.cs" From="public class BingTranslator : ITranslator" To="} // BingTranslator" />
      <RemoveLine Path="Southwind.Web\Global.asax.cs" Line="using Southwind.Web.BingTranslationService;" />
      <RemoveLine Path="Southwind.Load\Program.cs" Line="{44, ImportSpanishInstanceTranslations}," DependsOn="ExampleEntities"/>
      <RemoveLine Path="Southwind.Load\Program.cs" From="public static void ImportSpanishInstanceTranslations()" To="}" DependsOn="ExampleEntities"/>
      <RemoveFiles Path="Southwind.Load\Category.es.View.xlsx" DependsOn="ExampleEntities"/>
      <RemoveLine Path="Southwind.Entities\Product.cs" Line="[TranslateField] //Localize categoryName column" DependsOn="ExampleEntities"/>
      <RemoveLine Path="Southwind.Entities\Product.cs" Line="[TranslateField] //Localize description column" DependsOn="ExampleEntities"/>
      <RemoveLine Path="Southwind.Web\Scripts\southwind.ts" From="$(&quot;#languageSelector&quot;).bind(&quot;change&quot;, function () {" To="});"/>
      <RemoveLine Path="Southwind.Web\Scripts\southwind.js" From="$(&quot;#languageSelector&quot;).bind(&quot;change&quot;, function () {" To="});"/>
      <RemoveLine Path="Southwind.Web\Controllers\HomeController.cs" From="public ActionResult ChangeLanguage()" To="} //ChangeLanguage"/>
    </Module>
    
    <Module Name="Auth_ResetPasswordRequest" DependsOn="Auth,Mailing">
      <RemoveLine Path="Southwind.Logic\Starter.cs" Line="ResetPasswordRequestLogic.Start(sb, dqm);"/>
    </Module>

    <Module Name="Auth_UserTicket" DependsOn="Auth">
      <RemoveLine Path="Southwind.Logic\Starter.cs" Line="UserTicketLogic.Start(sb, dqm);"/>
    </Module>

    <Module Name="SessionLog" DependsOn="Auth">
      <RemoveLine Path="Southwind.Logic\Starter.cs" Line="SessionLogLogic.Start(sb, dqm);"/>
      <RemoveLine Path="Southwind.Web\Global.asax.cs" Line="SessionLogClient.Start();"/>
      <RemoveLine Path="Southwind.Web\Global.asax.cs" Line="SessionLogClient.LogSessionEnd((UserDN)Session[UserHolder.UserSessionKey], TimeSpan.FromMinutes(Session.Timeout));"/>
      <RemoveLine Path="Southwind.Web\Views\Shared\Menu.cshtml" Line="new WebMenuItem { Link = new FindOptions(typeof(SessionLogDN)) },"/>
    </Module>

    <Module Name="Alerts">
      <RemoveLine Path="Southwind.Logic\Starter.cs" Line="AlertLogic.Start(sb, dqm, typeof(UserDN), /*Alert*/typeof(OrderDN));"/>
      <RemoveSpanInLines Path="Southwind.Logic\Starter.cs" Span=", /*Alert*/typeof(OrderDN)" DependsOn="ExampleEntities" />
      <RemoveLine Path="Southwind.Logic\Starter.cs" Line="sb.Schema.Settings.FieldAttributes((AlertDN a) => a.CreatedBy).Replace(new ImplementedByAttribute(typeof(UserDN)));"/>
      <RemoveLine Path="Southwind.Logic\Starter.cs" Line="sb.Schema.Settings.FieldAttributes((AlertDN a) => a.AttendedBy).Replace(new ImplementedByAttribute(typeof(UserDN)));"/>
      <RemoveLine Path="Southwind.Web\Global.asax.cs" Line="AlertClient.Start(typeof(UserDN), /*Alert*/typeof(OrderDN));"/>
      <RemoveSpanInLines Path="Southwind.Web\Global.asax.cs" Span=", /*Alert*/typeof(OrderDN)" DependsOn="ExampleEntities"/>      
      <RemoveLine Path="Southwind.Windows\App.xaml.cs" Line="AlertClient.Start(typeof(UserDN), /*Alert*/typeof(OrderDN));"/>
      <RemoveSpanInLines Path="Southwind.Windows\App.xaml.cs" Span=", /*Alert*/typeof(OrderDN)" DependsOn="ExampleEntities"/>
    </Module>

    <Module Name="Notes">
      <RemoveLine Path="Southwind.Logic\Starter.cs" Line="NoteLogic.Start(sb, dqm, typeof(UserDN), /*Note*/typeof(OrderDN));"/>
      <RemoveSpanInLines Path="Southwind.Logic\Starter.cs" Span=", /*Note*/typeof(OrderDN)" DependsOn="ExampleEntities" />
      <RemoveLine Path="Southwind.Logic\Starter.cs" Line="sb.Schema.Settings.FieldAttributes((NoteDN n) => n.CreatedBy).Replace(new ImplementedByAttribute(typeof(UserDN)));"/>
      <RemoveLine Path="Southwind.Web\Global.asax.cs" Line="NoteClient.Start(typeof(UserDN), /*Note*/typeof(OrderDN));"/>
      <RemoveSpanInLines Path="Southwind.Web\Global.asax.cs" Span=", /*Note*/typeof(OrderDN)" DependsOn="ExampleEntities" />      
      <RemoveLine Path="Southwind.Windows\App.xaml.cs" Line="NoteClient.Start(typeof(UserDN), /*Note*/typeof(OrderDN));"/>
      <RemoveSpanInLines Path="Southwind.Windows\App.xaml.cs" Span=", /*Note*/typeof(OrderDN)" DependsOn="ExampleEntities" />
    
    </Module>

    <Module Name="Cache">
      <RemoveLine Path="Southwind.Logic\Starter.cs" Line="CacheLogic.Start(sb);"/>
      <RemoveLine Path="Southwind.Logic\Starter.cs" Line="SetupCache(sb);"/>
      <RemoveLine Path="Southwind.Logic\Starter.cs" From="private static void SetupCache(SchemaBuilder sb)" To="}"/>
      <RemoveLine Path="Southwind.Web\Global.asax.cs" Line="CacheClient.Start();"/>
    </Module>

    <Module Name="SplitDB">
      <RemoveLine Path="Southwind.Logic\Starter.cs" Line="string logDatabase = Connector.TryExtractDatabaseNameWithPostfix(ref connectionString, &quot;_Log&quot;);"/>
      <RemoveLine Path="Southwind.Logic\Starter.cs" Line="if (logDatabase.HasText())"/>
      <RemoveLine Path="Southwind.Logic\Starter.cs" Line="SetLogDatabase(sb.Schema, new DatabaseName(null, logDatabase));"/>
      <RemoveLine Path="Southwind.Logic\Starter.cs" From="public static void SetLogDatabase(Schema schema, DatabaseName logDatabaseName)" To="}"/>
    </Module>

    <Module Name="ThemeSelector">
      <RemoveFiles Path="Southwind.Web\Libs\bootstrap\themes"/>
      <RemoveLine Path="Southwind.Web\Scripts\southwind.ts" From="$(&quot;#themeSelector&quot;).bind(&quot;change&quot;, function () {" To="});"/>
      <RemoveLine Path="Southwind.Web\Scripts\southwind.js" From="$(&quot;#themeSelector&quot;).bind(&quot;change&quot;, function () {" To="});"/>
      <RemoveLine Path="Southwind.Web\Views\Shared\_Layout.cshtml" From="&lt;li class=&quot;theme-selector-container&quot;&gt;" To="&lt;/li&gt;"/>
      <RemoveLine Path="Southwind.Web\Views\Shared\_Layout.cshtml" From="//theme0" To="{ //theme1"/>
      <RemoveLine Path="Southwind.Web\Views\Shared\_Layout.cshtml" From="} //theme2" To="} //theme3"/>
	    <RemoveLine Path="Southwind.Web\Controllers\HomeController.cs" From="public ActionResult ChangeTheme()" To="}"/>
	    <RemoveLine Path="Southwind.Web\Code\SouthwindClient.cs" Line="public static string ThemeSessionKey = &quot;swCurrentTheme&quot;;"/>
	  </Module>

    <Module Name="PublicCatalog" DependsOn="ExampleEntities,Translation,Cache,Files">
      <RemoveLine Path="Southwind.Logic\ProductLogic.cs" Line="public static ResetLazy&lt;Dictionary&lt;CategoryDN, List&lt;ProductDN&gt;&gt;&gt; ActiveProducts;"/>
      <RemoveLine Path="Southwind.Logic\ProductLogic.cs" From="ActiveProducts = sb.GlobalLazy(() =>" To="new InvalidateWith(typeof(ProductDN)));"/>
      <RemoveFiles Path="Southwind.Web\Views\Home\PublicCatalog.cshtml"/>
      <RemoveLine Path="Southwind.Web\Views\Shared\_Layout.cshtml" From="&lt;li class=&quot;language-selector-container&quot;&gt;" To="&lt;/li&gt;"/>
      <RemoveLine Path="Southwind.Web\Views\Shared\Menu.cshtml" From="new WebMenuItem  //Catalog" To="}, //Catalog"/>
      <RemoveSpanInLines Path="Southwind.Web\Controllers\HomeController.cs" Span="[AuthenticationRequired(false)]"/>
      <RemoveLine Path="Southwind.Web\Controllers\HomeController.cs" From="if (UserDN.Current == null)" To="return RedirectToAction(&quot;PublicCatalog&quot;);"/>
      <RemoveLine Path="Southwind.Web\Controllers\HomeController.cs" From="public ActionResult PublicCatalog()" To="} //PublicCatalog"/>
    </Module>

    <Module Name="Profiler">
      <RemoveLine Path="Southwind.Web/ServerSouthwind.svc.cs" From="string longDescription = mi.Name + description == null ? null : (&quot; &quot; + description);" To="using (HeavyProfiler.Log(&quot;WCF&quot;, () => longDescription))"/>
      <RemoveLine Path="Southwind.Logic\Starter.cs" From="ProfilerLogic.Start(sb, dqm," To="overrideSessionTimeout: true);"/>
      <RemoveLine Path="Southwind.Web\Global.asax.cs" Line="SignumControllerFactory.EveryController().AddFilters(new ProfilerFilterAttribute());"/>
      <RemoveLine Path="Southwind.Web\Global.asax.cs" Line="ProfilerClient.Start();"/>
      <RemoveLine Path="Southwind.Windows\App.xaml.cs" Line="ProfilerClient.Start();"/>
    </Module>

    <Module Name="Omnibox">
      <RemoveLine Path="Southwind.Web\Global.asax.cs" From="OmniboxClient.Start();" To="OmniboxClient.Register(new DashboardOmniboxProvider());"/>
      <RemoveLine Path="Southwind.Windows\App.xaml.cs" From="OmniboxClient.Start();" To="OmniboxClient.Register(new DashboardOmniboxProvider());"/>
      <RemoveLine Path="Southwind.Web\Views\Shared\_Layout.cshtml" From="&lt;li> @*Omnibox*@" To="&lt;/li>"/>
      <RemoveLine Path="Southwind.Windows\Main.xaml" Line="&lt;swo:OmniboxAutocomplete MinWidth=&quot;200&quot; DockPanel.Dock=&quot;Right&quot;/>"/>
    </Module>

    <Module Name="Test.Environment">
      <RemoveFiles Path="Southwind.Test.Environment"/>

      <RemoveLine DependsOn="ExampleEntities"  Path="Southwind.Test.Environment\SouthwindEnvironment.cs"
                  From="internal static void LoadEmployees()"
                  To="} //LoadEmployees" />
      <RemoveLine DependsOn="ExampleEntities" Path="Southwind.Test.Environment\SouthwindEnvironment.cs"
                   From="internal static void LoadProducts()"
                   To="}//LoadShippers" />
      <RemoveFiles DependsOn="ExampleEntities" Path="Southwind.Test.Environment\SouthwindExtensions.cs" />
      <RemoveLine DependsOn="ExampleEntities" Path="Southwind.Test.Environment\EnvironmentTest.cs" Line="SouthwindEnvironment.LoadEmployees();"/>
      <RemoveLine DependsOn="ExampleEntities" Path="Southwind.Test.Environment\EnvironmentTest.cs" Line="SouthwindEnvironment.LoadProducts();"/>
      <RemoveLine DependsOn="ExampleEntities" Path="Southwind.Test.Environment\EnvironmentTest.cs" Line="SouthwindEnvironment.LoadCustomers();"/>
      <RemoveLine DependsOn="ExampleEntities" Path="Southwind.Test.Environment\EnvironmentTest.cs" Line="SouthwindEnvironment.LoadShippers();"/>
    </Module>

    <Module Name="Test.Logic" DependsOn="Test.Environment">
      <RemoveFiles Path="Southwind.Test.Logic"/>
      <RemoveLine DependsOn="ExampleEntities" Path="Southwind.Test.Logic\OrderTest.cs" From="[TestMethod]" To="}//OrderTestExample"/>
    </Module>

    <Module Name="Test.Windows" DependsOn="Test.Environment, Windows">
      <RemoveFiles Path="Southwind.Test.Windows"/>

      <RemoveLine DependsOn="ExampleEntities" Path="Southwind.Test.Windows\Common.cs"
            From="public static DetailGridProxy DetailGrid(this ILineContainer&lt;OrderDN> container)"
            To="}//DetailGrid"/>
      <RemoveLine DependsOn="ExampleEntities" Path="Southwind.Test.Windows\Common.cs" From="public class DetailGridProxy" To="}//DetailGridRowProxy"/>
      <RemoveLine DependsOn="ExampleEntities" Path="Southwind.Test.Windows\OrderWindowTest.cs" From="[TestMethod]" To="}//OrderWindowsTestExample"/>
    </Module>

    <Module Name="Test.Web" DependsOn="Test.Environment">
      <RemoveFiles Path="Southwind.Test.Web"/>

      <RemoveLine DependsOn="ExampleEntities" Path="Southwind.Test.Web\OrderWebTest.cs" From="[TestMethod]" To="}//OrderWebTestExample"/>
    </Module>
  </Modules>

  <Projects>
    <Project Path ="Southwind.Entities\Southwind.Entities.csproj"/>
    <Project Path ="Southwind.Load\Southwind.Load.csproj"/>
    <Project Path ="Southwind.Local\Southwind.Local.csproj"/>
    <Project Path ="Southwind.Logic\Southwind.Logic.csproj"/>
    <Project Path ="Southwind.Web\Southwind.Web.csproj"/>
    <Project Path ="Southwind.Windows\Southwind.Windows.csproj"/>
    <Project Path ="Southwind.Test.Environment\Southwind.Test.Environment.csproj"/>
    <Project Path ="Southwind.Test.Logic\Southwind.Test.Logic.csproj"/>
    <Project Path ="Southwind.Test.Web\Southwind.Test.Web.csproj"/>
    <Project Path ="Southwind.Test.Windows\Southwind.Test.Windows.csproj"/>
  </Projects>

  <Solutions>
    <Solution Path="Southwind.sln" />
  </Solutions>
</File>
